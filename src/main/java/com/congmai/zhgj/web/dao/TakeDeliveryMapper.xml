<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.congmai.zhgj.web.dao.TakeDeliveryMapper" >
  <resultMap id="BaseResultMap" type="com.congmai.zhgj.web.model.TakeDelivery" >
    <id column="serialNum" property="serialNum" jdbcType="VARCHAR" />
    <result column="deliverSerial" property="deliverSerial" jdbcType="VARCHAR" />
    <result column="warehouseSerial" property="warehouseSerial" jdbcType="VARCHAR" />
    <result column="takeDeliverDate" property="takeDeliverDate" jdbcType="DATE" />
    <result column="receiver" property="receiver" jdbcType="VARCHAR" />
    <result column="contactNum" property="contactNum" jdbcType="VARCHAR" />
    <result column="takeDeliverNum" property="takeDeliverNum" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="delFlg" property="delFlg" jdbcType="VARCHAR" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="createTime" property="createTime" jdbcType="TIMESTAMP" />
    <result column="updater" property="updater" jdbcType="VARCHAR" />
    <result column="updateTime" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="actualDate" property="actualDate" jdbcType="TIMESTAMP" />
	<result column="taker" property="taker" jdbcType="VARCHAR" />
	<result column="takeRemark" property="takeRemark" jdbcType="VARCHAR" />
	<result column="reason" property="reason" jdbcType="VARCHAR" />
    <result column="processInstanceId" property="processInstanceId" jdbcType="VARCHAR" />
    <result column="userId" property="userId" jdbcType="INTEGER" />
    <result column="applyDate" property="applyDate" jdbcType="DATE" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="takeDeliverAddress" property="takeDeliverAddress" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="BaseResultMap2" type="com.congmai.zhgj.web.model.Delivery" >
    <id column="serialNum" property="serialNum" jdbcType="VARCHAR" />
    <result column="deliverNum" property="deliverNum" jdbcType="VARCHAR" />
    <result column="deliverType" property="deliverType" jdbcType="VARCHAR" />
    <result column="orderSerial" property="orderSerial" jdbcType="VARCHAR" />
     <result column="docNum" property="docNum" jdbcType="VARCHAR" />
    <result column="supplyComId" property="supplyComId" jdbcType="VARCHAR" />
    <result column="buyComId" property="buyComId" jdbcType="VARCHAR" />
    <result column="shipper" property="shipper" jdbcType="VARCHAR" />
    <result column="receiver" property="receiver" jdbcType="VARCHAR" />
    <result column="makeDate" property="makeDate" jdbcType="DATE" />
    <result column="maker" property="maker" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="approval" property="approval" jdbcType="VARCHAR" />
    <result column="approvalDate" property="approvalDate" jdbcType="DATE" />
   <!--  <result column="warehouseSerial" property="warehouseSerial" jdbcType="VARCHAR" /> -->
    <result column="materielCount" property="materielCount" jdbcType="VARCHAR" />
    <result column="deliverDate" property="deliverDate" jdbcType="DATE" />
    <result column="packageCount" property="packageCount" jdbcType="VARCHAR" />
    <result column="materielWeight" property="materielWeight" jdbcType="VARCHAR" />
    <result column="packageType" property="packageType" jdbcType="VARCHAR" />
    <result column="packageSpecifications" property="packageSpecifications" jdbcType="VARCHAR" />
    <result column="serviceMoney" property="serviceMoney" jdbcType="VARCHAR" />
    <result column="deliverer" property="deliverer" jdbcType="VARCHAR" />
    <result column="contactNum" property="contactNum" jdbcType="VARCHAR" />
    <result column="deliverRemark" property="deliverRemark" jdbcType="VARCHAR" />
    <result column="delFlg" property="delFlg" jdbcType="VARCHAR" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="createTime" property="createTime" jdbcType="TIMESTAMP" />
    <result column="updater" property="updater" jdbcType="VARCHAR" />
    <result column="updateTime" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="deliverAddress" property="deliverAddress" jdbcType="VARCHAR" />
    <result column="takeDeliverer" property="takeDeliverer" jdbcType="VARCHAR" />
    <result column="takeContactNum" property="takeContactNum" jdbcType="VARCHAR" />
    <result column="takeTransportRemark" property="takeTransportRemark" jdbcType="VARCHAR" />
    <result column="takeDeliverer" property="takeDeliverer" jdbcType="VARCHAR" />
    <result column="deRemark" property="deRemark" jdbcType="VARCHAR" />
    <result column="deContact" property="deContact" jdbcType="VARCHAR" />
	<result column="deContactNum" property="deContactNum" jdbcType="VARCHAR" />
	<result column="saleOrderNum" property="saleOrderNum" jdbcType="VARCHAR" />
    <association property="deliveryTransport"  javaType="com.congmai.zhgj.web.model.DeliveryTransport">
    	 <result column="dtSerialNum" property="serialNum" jdbcType="VARCHAR" />
    	 <result column="transportType" property="transportType" jdbcType="VARCHAR" />
		 <result column="transport" property="transport" jdbcType="VARCHAR" />
		 <result column="port" property="port" jdbcType="VARCHAR" />
		 <result column="shipNumber" property="shipNumber" jdbcType="VARCHAR" />
		 <result column="playArrivalDate" property="playArrivalDate" jdbcType="TIMESTAMP" />
		 <result column="playWarehouseDate" property="playWarehouseDate" jdbcType="TIMESTAMP" />
		 <result column="delivery_transport_remark" property="remark" jdbcType="VARCHAR" />
		 <result column="dtContact" property="contact" jdbcType="VARCHAR" />
    	 <result column="dtContactNum" property="contactNum" jdbcType="VARCHAR" />
    </association>
    <association property="takeDelivery" javaType="com.congmai.zhgj.web.model.TakeDelivery">
    	 <result column="tdSerialNum" property="serialNum" jdbcType="VARCHAR" />
    	 <result column="warehouseSerial" property="warehouseSerial" jdbcType="VARCHAR" />
    	 <result column="takeDeliverDate" property="takeDeliverDate" jdbcType="DATE" />
    	 <result column="tdReceiver" property="receiver" jdbcType="VARCHAR" />
         <result column="tdContactNum" property="contactNum" jdbcType="VARCHAR" />
         <result column="takeDeliverNum" property="takeDeliverNum" jdbcType="VARCHAR" />
         <result column="take_delivery_remark" property="remark" jdbcType="VARCHAR" />
         <result column="actualDate" property="actualDate" jdbcType="TIMESTAMP" />
		 <result column="taker" property="taker" jdbcType="VARCHAR" />
		 <result column="takeRemark" property="takeRemark" jdbcType="VARCHAR" />
		 <result column="reason" property="reason" jdbcType="VARCHAR" />
	     <result column="processInstanceId" property="processInstanceId" jdbcType="VARCHAR" />
	     <result column="userId" property="userId" jdbcType="INTEGER" />
	     <result column="applyDate" property="applyDate" jdbcType="DATE" />
	     <result column="status" property="status" jdbcType="VARCHAR" />
	     <result column="takeDeliverAddress" property="takeDeliverAddress" jdbcType="VARCHAR" />
         <association column="tdWarehouseSerial" property="warehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
    </association>
    <association column="warehouseSerial" property="warehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
    <association property="supplyName" column="supplyComId" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association>
    <association property="buyName" column="buyComId" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association>
   <!--  <association property="shipperName" column="shipper" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association>
    <association property="receiverName" column="receiver" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association> -->
    <association property="orderNum" column="orderSerial" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectOrderNumByOrderSerial"></association>
     <association property="orderAmount" column="orderSerial" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectOrderAmountByOrderSerial"></association>
    <collection property="deliveryMateriels" ofType="com.congmai.zhgj.web.model.DeliveryMateriel">
    
    	<!--  <result column="orderMaterielSerial" property="orderMaterielSerial" jdbcType="VARCHAR" /> -->
	     <result column="dmSerialNum" property="serialNum" jdbcType="VARCHAR" />
	     <result column="batchNum" property="batchNum" jdbcType="VARCHAR" />
	     <result column="manufactureDate" property="manufactureDate" jdbcType="DATE" />
	     <result column="deliverCount" property="deliverCount" jdbcType="VARCHAR" />
	     <result column="deliverRemark" property="deliverRemark" jdbcType="VARCHAR" />
	     <result column="acceptCount" property="acceptCount" jdbcType="VARCHAR" />
	     <result column="refuseCount" property="refuseCount" jdbcType="VARCHAR" />
	     <result column="takeRemark" property="takeRemark" jdbcType="VARCHAR" />
	     <result column="qualifiedCount" property="qualifiedCount" jdbcType="VARCHAR" />
	     <result column="unqualifiedCount" property="unqualifiedCount" jdbcType="VARCHAR" />
	     <result column="checkRemark" property="checkRemark" jdbcType="VARCHAR" />
	     <result column="warehouseSerial" property="warehouseSerial" jdbcType="VARCHAR" />
	     <result column="positionSerial" property="positionSerial" jdbcType="VARCHAR" />
	     <result column="stockCount" property="stockCount" jdbcType="VARCHAR" />
	     <result column="unstockCount" property="unstockCount" jdbcType="VARCHAR" />
	     <result column="stockRemark" property="stockRemark" jdbcType="VARCHAR" />
	     <result column="stockInQualifiedCount" property="stockInQualifiedCount" jdbcType="VARCHAR" />
	     <result column="stockInUnqualifiedCount" property="stockInUnqualifiedCount" jdbcType="VARCHAR" />
	     <result column="stockInCheckRemark" property="stockInCheckRemark" jdbcType="VARCHAR" />
	     <result column="stockInWarehouseSerial" property="stockInWarehouseSerial" jdbcType="VARCHAR" />
	     <result column="stockInPositionSerial" property="stockInPositionSerial" jdbcType="VARCHAR" />
	     <result column="stockInCount" property="stockInCount" jdbcType="VARCHAR" />
	     <result column="unstockInCount" property="unstockInCount" jdbcType="VARCHAR" />
	     <result column="stockInRemark" property="stockInRemark" jdbcType="VARCHAR" />
	     <result column="dmRemark" property="remark" jdbcType="VARCHAR" />
	     <result column="supplyMaterielSerial" property="supplyMaterielSerial" jdbcType="VARCHAR" />
	     <association column="orderMaterielSerial" property="deliveredCount" select="com.congmai.zhgj.web.dao.DeliveryMapper.selectDeliveredCountByOmSerial"  />
	     <association column="dmWarehouseSerial" property="warehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
	     <association column="dmPositionSerial" property="position" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectPositionByPositionSerial" ></association>
	     <association column="stockInWarehouseSerial" property="stockInWarehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
	     <association column="stockInPositionSerial" property="stockInPosition" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectPositionByPositionSerial" ></association>
	     <association column="orderMaterielSerial" property="orderMateriel" select="com.congmai.zhgj.web.dao.OrderMaterielMapper.selectByPrimaryKey" ></association>
	     <association column="supplyMaterielSerial" property="supplyMateriel" select="com.congmai.zhgj.web.dao.SupplyMaterielMapper.selectByPrimaryKey" ></association>
	       <association column="dmSerialNum" property="stockInBatchs" select="com.congmai.zhgj.web.dao.StockOutBatchMapper.selectStockInBatchBySerialNum" ></association><!--  根据发货物料取出批次相关入库批次详情-->
    </collection>
  </resultMap>
  <!--入库计划列表  -->
  <resultMap id="BaseResultMapForIn" type="com.congmai.zhgj.web.model.Delivery" >
    <id column="serialNum" property="serialNum" jdbcType="VARCHAR" />
    <result column="deliverNum" property="deliverNum" jdbcType="VARCHAR" />
    <result column="deliverType" property="deliverType" jdbcType="VARCHAR" />
    <result column="orderSerial" property="orderSerial" jdbcType="VARCHAR" />
     <result column="docNum" property="docNum" jdbcType="VARCHAR" />
    <result column="supplyComId" property="supplyComId" jdbcType="VARCHAR" />
    <result column="buyComId" property="buyComId" jdbcType="VARCHAR" />
    <result column="shipper" property="shipper" jdbcType="VARCHAR" />
    <result column="receiver" property="receiver" jdbcType="VARCHAR" />
    <result column="makeDate" property="makeDate" jdbcType="DATE" />
    <result column="maker" property="maker" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="approval" property="approval" jdbcType="VARCHAR" />
    <result column="approvalDate" property="approvalDate" jdbcType="DATE" />
   <!--  <result column="warehouseSerial" property="warehouseSerial" jdbcType="VARCHAR" /> -->
    <result column="materielCount" property="materielCount" jdbcType="VARCHAR" />
    <result column="deliverDate" property="deliverDate" jdbcType="DATE" />
    <result column="packageCount" property="packageCount" jdbcType="VARCHAR" />
    <result column="materielWeight" property="materielWeight" jdbcType="VARCHAR" />
    <result column="packageType" property="packageType" jdbcType="VARCHAR" />
    <result column="packageSpecifications" property="packageSpecifications" jdbcType="VARCHAR" />
    <result column="serviceMoney" property="serviceMoney" jdbcType="VARCHAR" />
    <result column="deliverer" property="deliverer" jdbcType="VARCHAR" />
    <result column="contactNum" property="contactNum" jdbcType="VARCHAR" />
    <result column="deliverRemark" property="deliverRemark" jdbcType="VARCHAR" />
    <result column="delFlg" property="delFlg" jdbcType="VARCHAR" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="createTime" property="createTime" jdbcType="TIMESTAMP" />
    <result column="updater" property="updater" jdbcType="VARCHAR" />
    <result column="updateTime" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="deliverAddress" property="deliverAddress" jdbcType="VARCHAR" />
    <result column="takeDeliverAddress" property="takeDeliverAddress" jdbcType="VARCHAR" />
    <result column="realCount" property="realCount" jdbcType="VARCHAR" />
   
     <result column="inOutSerial" property="inOutSerial" jdbcType="VARCHAR" />
    <result column="inOutNum" property="inOutNum" jdbcType="VARCHAR" />
    <result column="inOutType" property="inOutType" jdbcType="TIMESTAMP" />
    <result column="inOutRemark" property="inOutRemark" jdbcType="VARCHAR" />
    <result column="inOutPackageCount" property="inOutPackageCount" jdbcType="VARCHAR" />
   
    <association property="deliveryTransport"  javaType="com.congmai.zhgj.web.model.DeliveryTransport">
    	 <result column="dtSerialNum" property="serialNum" jdbcType="VARCHAR" />
    	 <result column="transportType" property="transportType" jdbcType="VARCHAR" />
		 <result column="transport" property="transport" jdbcType="VARCHAR" />
		 <result column="port" property="port" jdbcType="VARCHAR" />
		 <result column="shipNumber" property="shipNumber" jdbcType="VARCHAR" />
		 <result column="playArrivalDate" property="playArrivalDate" jdbcType="TIMESTAMP" />
		 <result column="playWarehouseDate" property="playWarehouseDate" jdbcType="TIMESTAMP" />
		 <result column="delivery_transport_remark" property="remark" jdbcType="VARCHAR" />
		 <result column="dtContact" property="contact" jdbcType="VARCHAR" />
    	 <result column="dtContactNum" property="contactNum" jdbcType="VARCHAR" />
    </association>
    <association property="takeDelivery" javaType="com.congmai.zhgj.web.model.TakeDelivery">
    	 <result column="tdSerialNum" property="serialNum" jdbcType="VARCHAR" />
    	 <result column="warehouseSerial" property="warehouseSerial" jdbcType="VARCHAR" />
    	 <result column="takeDeliverDate" property="takeDeliverDate" jdbcType="DATE" />
    	 <result column="tdReceiver" property="receiver" jdbcType="VARCHAR" />
         <result column="tdContactNum" property="contactNum" jdbcType="VARCHAR" />
         <result column="takeDeliverNum" property="takeDeliverNum" jdbcType="VARCHAR" />
         <result column="take_delivery_remark" property="remark" jdbcType="VARCHAR" />
         <result column="actualDate" property="actualDate" jdbcType="TIMESTAMP" />
		 <result column="taker" property="taker" jdbcType="VARCHAR" />
		 <result column="takeRemark" property="takeRemark" jdbcType="VARCHAR" />
		 <result column="reason" property="reason" jdbcType="VARCHAR" />
	     <result column="processInstanceId" property="processInstanceId" jdbcType="VARCHAR" />
	     <result column="userId" property="userId" jdbcType="INTEGER" />
	     <result column="applyDate" property="applyDate" jdbcType="DATE" />
	     <result column="status" property="status" jdbcType="VARCHAR" />
	     <result column="takeDeliverAddress" property="takeDeliverAddress" jdbcType="VARCHAR" />
         <association column="tdWarehouseSerial" property="warehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
    </association>
    <association column="warehouseSerial" property="warehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
    <association property="supplyName" column="supplyComId" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association>
    <association property="buyName" column="buyComId" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association>
   <!--  <association property="shipperName" column="shipper" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association>
    <association property="receiverName" column="receiver" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association> -->
    <association property="orderNum" column="orderSerial" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectOrderNumByOrderSerial"></association>
     <association property="orderAmount" column="orderSerial" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectOrderAmountByOrderSerial"></association>
    <collection property="deliveryMateriels" ofType="com.congmai.zhgj.web.model.DeliveryMateriel">
    
    	<!--  <result column="orderMaterielSerial" property="orderMaterielSerial" jdbcType="VARCHAR" /> -->
	     <result column="dmSerialNum" property="serialNum" jdbcType="VARCHAR" />
	     <result column="batchNum" property="batchNum" jdbcType="VARCHAR" />
	     <result column="manufactureDate" property="manufactureDate" jdbcType="DATE" />
	     <result column="deliverCount" property="deliverCount" jdbcType="VARCHAR" />
	     <result column="deliverRemark" property="deliverRemark" jdbcType="VARCHAR" />
	     <result column="acceptCount" property="acceptCount" jdbcType="VARCHAR" />
	     <result column="refuseCount" property="refuseCount" jdbcType="VARCHAR" />
	     <result column="takeRemark" property="takeRemark" jdbcType="VARCHAR" />
	     <result column="qualifiedCount" property="qualifiedCount" jdbcType="VARCHAR" />
	     <result column="unqualifiedCount" property="unqualifiedCount" jdbcType="VARCHAR" />
	     <result column="checkRemark" property="checkRemark" jdbcType="VARCHAR" />
	     <result column="warehouseSerial" property="warehouseSerial" jdbcType="VARCHAR" />
	     <result column="positionSerial" property="positionSerial" jdbcType="VARCHAR" />
	     <result column="stockCount" property="stockCount" jdbcType="VARCHAR" />
	     <result column="unstockCount" property="unstockCount" jdbcType="VARCHAR" />
	     <result column="stockRemark" property="stockRemark" jdbcType="VARCHAR" />
	     <result column="stockInQualifiedCount" property="stockInQualifiedCount" jdbcType="VARCHAR" />
	     <result column="stockInUnqualifiedCount" property="stockInUnqualifiedCount" jdbcType="VARCHAR" />
	     <result column="stockInCheckRemark" property="stockInCheckRemark" jdbcType="VARCHAR" />
	     <result column="stockInWarehouseSerial" property="stockInWarehouseSerial" jdbcType="VARCHAR" />
	     <result column="stockInPositionSerial" property="stockInPositionSerial" jdbcType="VARCHAR" />
	     <result column="stockInCount" property="stockInCount" jdbcType="VARCHAR" />
	     <result column="unstockInCount" property="unstockInCount" jdbcType="VARCHAR" />
	     <result column="stockInRemark" property="stockInRemark" jdbcType="VARCHAR" />
	     <result column="dmRemark" property="remark" jdbcType="VARCHAR" />
	     <result column="supplyMaterielSerial" property="supplyMaterielSerial" jdbcType="VARCHAR" />
	     <association column="dmWarehouseSerial" property="warehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
	     <association column="dmPositionSerial" property="position" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectPositionByPositionSerial" ></association>
	     <association column="stockInWarehouseSerial" property="stockInWarehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
	     <association column="stockInPositionSerial" property="stockInPosition" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectPositionByPositionSerial" ></association>
	     <association column="orderMaterielSerial" property="orderMateriel" select="com.congmai.zhgj.web.dao.OrderMaterielMapper.selectByPrimaryKey" ></association>
	     <association column="supplyMaterielSerial" property="supplyMateriel" select="com.congmai.zhgj.web.dao.SupplyMaterielMapper.selectByPrimaryKey" ></association>
    </collection>
  </resultMap>
    <resultMap id="BaseResultMap3" type="com.congmai.zhgj.web.model.Delivery" >
    <id column="serialNum" property="serialNum" jdbcType="VARCHAR" />
    <result column="deliverNum" property="deliverNum" jdbcType="VARCHAR" />
    <result column="deliverType" property="deliverType" jdbcType="VARCHAR" />
    <result column="orderSerial" property="orderSerial" jdbcType="VARCHAR" />
    <result column="docNum" property="docNum" jdbcType="VARCHAR" />
    <result column="supplyComId" property="supplyComId" jdbcType="VARCHAR" />
    <result column="buyComId" property="buyComId" jdbcType="VARCHAR" />
    <association property="takeDelivery" javaType="com.congmai.zhgj.web.model.TakeDelivery">
    	 <result column="tdSerialNum" property="serialNum" jdbcType="VARCHAR" />
         <result column="takeDeliverNum" property="takeDeliverNum" jdbcType="VARCHAR" />
         <association column="tdWarehouseSerial" property="warehouse" select="com.congmai.zhgj.web.dao.Delivery2Mapper.selectWarehouseByWarehouseSerial" ></association>
    </association>
    <association property="supplyName" column="supplyComId" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association>
    <association property="buyName" column="buyComId" select="com.congmai.zhgj.web.dao.CompanyMapper.selectComNameByPrimaryKey"></association>
    <collection property="deliveryMateriels" ofType="com.congmai.zhgj.web.model.DeliveryMateriel">
    	<!--  <result column="orderMaterielSerial" property="orderMaterielSerial" jdbcType="VARCHAR" /> -->
	     <result column="batchNum" property="batchNum" jdbcType="VARCHAR" />
	     <result column="manufactureDate" property="manufactureDate" jdbcType="DATE" />
	     <result column="deliverCount" property="deliverCount" jdbcType="VARCHAR" />
	     <result column="deliverRemark" property="deliverRemark" jdbcType="VARCHAR" />
	     <result column="acceptCount" property="acceptCount" jdbcType="VARCHAR" />
	     <result column="refuseCount" property="refuseCount" jdbcType="VARCHAR" />
	     <result column="takeRemark" property="takeRemark" jdbcType="VARCHAR" />
	     <result column="qualifiedCount" property="qualifiedCount" jdbcType="VARCHAR" />
	     <result column="unqualifiedCount" property="unqualifiedCount" jdbcType="VARCHAR" />
	     <result column="checkRemark" property="checkRemark" jdbcType="VARCHAR" />
	     <result column="warehouseSerial" property="warehouseSerial" jdbcType="VARCHAR" />
	     <result column="positionSerial" property="positionSerial" jdbcType="VARCHAR" />
	     <result column="stockCount" property="stockCount" jdbcType="VARCHAR" />
	     <result column="unstockCount" property="unstockCount" jdbcType="VARCHAR" />
	     <result column="stockRemark" property="stockRemark" jdbcType="VARCHAR" />
	     <result column="dmRemark" property="remark" jdbcType="VARCHAR" />
	     <association column="orderMaterielSerial" property="orderMateriel" select="com.congmai.zhgj.web.dao.OrderMaterielMapper.selectByPrimaryKey" ></association>
	    
    </collection>
  </resultMap>
  
  <sql id="Example_Where_Clause" >
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
   <sql id="Base_Column_List" >
    serialNum, deliverSerial, warehouseSerial, takeDeliverDate, receiver, contactNum, 
    takeDeliverNum, remark, actualDate, taker, takeRemark, takeDeliverAddress, delFlg, 
    creator, createTime, updater, updateTime, reason, processInstanceId, userId, applyDate, 
    status
  </sql>
    <select id="selectListByExample" resultMap="BaseResultMapForIn" parameterType="com.congmai.zhgj.web.model.DeliverySelectExample" >
    select
    d.serialNum, d.deliverNum,d.deliverType, d.orderSerial,d.docNum,d.shipper, d.receiver, d.makeDate, d.maker, 
    d.remark, d.approval, d.approvalDate, d.warehouseSerial, d.materielCount, d.deliverDate, 
    d.packageCount, d.materielWeight, d.packageType, d.packageSpecifications, d.serviceMoney, d.deliverer, d.deliverAddress,
    dt.transportType,d.supplyComId,d.buyComId,
	td.serialNum as tdSerialNum,td.warehouseSerial as tdWarehouseSerial,td.takeDeliverDate,td.receiver as tdReceiver,td.contactNum as tdContactNum,td.takeDeliverNum,td.remark as take_delivery_remark,
	td.status,td.takeDeliverAddress,
	 sr. inOutNum as inOutNum,  sr.inOutType as inOutType, sr.remark as  inOutRemark,sr.packageCount as  inOutPackageCount, sr.serialNum as inOutSerial,sr.realCount as realCount
    from takeDelivery td
    left join delivery  d on d.serialNum = td.deliverSerial
    left join deliveryTransport dt on d.serialNum = dt.deliverSerial
    left join stockInOutRecord  sr on  sr.takeDeliverSerial=td.serialNum
    
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByTakeDeliveryPrimaryKey" resultMap="BaseResultMap2" parameterType="java.lang.String" >
    select
    d.serialNum, d.deliverNum,d.deliverType,d.docNum, d.orderSerial, d.supplyComId, d.buyComId, d.shipper, d.receiver, d.makeDate, d.maker, 
    d.remark, d.approval, d.approvalDate, d.warehouseSerial as warehouseSerial, d.materielCount, d.deliverDate,d.deliverAddress, 
    d.packageCount, d.materielWeight, d.packageType, d.packageSpecifications, d.serviceMoney, d.deliverer, 
    d.contactNum, d.deliverRemark, d.delFlg, d.creator, d.createTime, d.updater, d.updateTime,dm.batchNum,d.contactNum, d.deliverRemark, d.delFlg, d.creator, d.createTime, d.updater, d.updateTime,
    d.takeDeliverer,d.takeTransportRemark,d.takeContactNum,d.saleOrderNum,d.deRemark,d.deContactNum,d.deContact,
    dm.batchNum,dm.serialNum as dmSerialNum,
    dm.manufactureDate,dm.deliverCount,dm.deliverRemark,
    dm2.acceptCount,dm2.refuseCount,dm2.takeRemark,dm.qualifiedCount,dm.unqualifiedCount,dm.checkRemark,dm.warehouseSerial,dm.orderMaterielSerial,
    dm2.serialNum as stockInSerialNum,dm2.qualifiedCount as stockInQualifiedCount,dm2.unqualifiedCount as stockInUnqualifiedCount,dm2.checkRemark as stockInCheckRemark,dm2.warehouseSerial as stockInWarehouseSerial,
	dm2.positionSerial as stockInPositionSerial,dm2.stockCount as stockInCount,dm2.unstockCount as unstockInCount,dm2.stockRemark as stockInRemark,
    dt.serialNum as dtSerialNum,dt.transportType,dt.transport,dt.port,dt.shipNumber,dt.playArrivalDate,dt.playWarehouseDate,dt.remark as delivery_transport_remark,dt.contactNum as dtContactNum,dt.contact as dtContact,
	td.serialNum as tdSerialNum,td.warehouseSerial as tdWarehouseSerial,td.takeDeliverDate,td.receiver as tdReceiver,td.contactNum as tdContactNum,td.takeDeliverNum,td.remark as take_delivery_remark, 
	td.actualDate, td.taker, td.takeRemark,td.reason,td.processInstanceId,td.userId,td.applyDate,td.status,td.takeDeliverAddress
    from takeDelivery td
    left join delivery  d on d.serialNum = td.deliverSerial
    left join deliveryTransport dt on d.serialNum = dt.deliverSerial  and dt.delFlg = "0"
    left join deliveryMateriel dm on td.serialNum = dm.deliverSerial and dm.delFlg = "0"
    left join deliveryMateriel dm2 on td.serialNum = dm2.deliverSerial and dm.orderMaterielSerial=dm2.orderMaterielSerial and dm.delFlg = "0"
    where td.serialNum = #{serialNum,jdbcType=VARCHAR} 
  </select>
  <select id="selectByTakeDeliveryPrimaryKeyForOtherType" resultMap="BaseResultMap2" parameterType="java.lang.String" >
    select
    d.serialNum, d.deliverNum,d.deliverType,d.docNum, d.orderSerial, d.supplyComId, d.buyComId, d.shipper, d.receiver, d.makeDate, d.maker, 
    d.remark, d.approval, d.approvalDate, d.warehouseSerial as warehouseSerial, d.materielCount, d.deliverDate,d.deliverAddress, 
    d.packageCount, d.materielWeight, d.packageType, d.packageSpecifications, d.serviceMoney, d.deliverer, 
    d.contactNum, d.deliverRemark, d.delFlg, d.creator, d.createTime, d.updater, d.updateTime,dm.batchNum,    d.contactNum, d.deliverRemark, d.delFlg, d.creator, d.createTime, d.updater, d.updateTime,dm.batchNum,dm.serialNum as dmSerialNum,
    dm.manufactureDate,dm.deliverCount,dm.deliverRemark,dm.supplyMaterielSerial,
    dm2.acceptCount,dm2.refuseCount,dm2.takeRemark,dm.qualifiedCount,dm.unqualifiedCount,dm.checkRemark,dm.warehouseSerial,dm.orderMaterielSerial,
    dm2.serialNum as stockInSerialNum,dm2.qualifiedCount as stockInQualifiedCount,dm2.unqualifiedCount as stockInUnqualifiedCount,dm2.checkRemark as stockInCheckRemark,dm2.warehouseSerial as stockInWarehouseSerial,
	dm2.positionSerial as stockInPositionSerial,dm2.stockCount as stockInCount,dm2.unstockCount as unstockInCount,dm2.stockRemark as stockInRemark,dm2.supplyMaterielSerial,
    dt.serialNum as dtSerialNum,dt.transportType,dt.transport,dt.port,dt.shipNumber,dt.playArrivalDate,dt.playWarehouseDate,dt.remark as delivery_transport_remark,dt.contactNum as dtContactNum,dt.contact as dtContact,
	td.serialNum as tdSerialNum,td.warehouseSerial as tdWarehouseSerial,td.takeDeliverDate,td.receiver as tdReceiver,td.contactNum as tdContactNum,td.takeDeliverNum,td.remark as take_delivery_remark, 
	td.actualDate, td.taker, td.takeRemark,td.reason,td.processInstanceId,td.userId,td.applyDate,td.status,td.takeDeliverAddress
    from takeDelivery td
    left join delivery  d on d.serialNum = td.deliverSerial
    left join deliveryTransport dt on d.serialNum = dt.deliverSerial  and dt.delFlg = "0"
    left join deliveryMateriel dm on d.serialNum = dm.deliverSerial and dm.delFlg = "0"
    left join deliveryMateriel dm2 on td.serialNum = dm2.deliverSerial and dm.supplyMaterielSerial=dm2.supplyMaterielSerial and dm.delFlg = "0"
    where td.serialNum = #{serialNum,jdbcType=VARCHAR} 
  </select>
   <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from takeDelivery
    where serialNum = #{serialNum,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from takeDelivery
    where serialNum = #{serialNum,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.congmai.zhgj.web.model.TakeDeliveryExample" >
    delete from takeDelivery
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.congmai.zhgj.web.model.TakeDelivery" >
    insert into takeDelivery (serialNum, deliverSerial, warehouseSerial, 
      takeDeliverDate, receiver, contactNum, 
      takeDeliverNum, remark, actualDate, 
      taker, takeRemark, takeDeliverAddress, 
      delFlg, creator, createTime, 
      updater, updateTime, reason, 
      processInstanceId, userId, applyDate, 
      status)
    values (#{serialNum,jdbcType=VARCHAR}, #{deliverSerial,jdbcType=VARCHAR}, #{warehouseSerial,jdbcType=VARCHAR}, 
      #{takeDeliverDate,jdbcType=DATE}, #{receiver,jdbcType=VARCHAR}, #{contactNum,jdbcType=VARCHAR}, 
      #{takeDeliverNum,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR}, #{actualDate,jdbcType=TIMESTAMP}, 
      #{taker,jdbcType=VARCHAR}, #{takeRemark,jdbcType=VARCHAR}, #{takeDeliverAddress,jdbcType=VARCHAR}, 
      #{delFlg,jdbcType=VARCHAR}, #{creator,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, 
      #{updater,jdbcType=VARCHAR}, #{updateTime,jdbcType=TIMESTAMP}, #{reason,jdbcType=VARCHAR}, 
      #{processInstanceId,jdbcType=VARCHAR}, #{userId,jdbcType=INTEGER}, #{applyDate,jdbcType=DATE}, 
      #{status,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.congmai.zhgj.web.model.TakeDelivery" >
    insert into takeDelivery
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="serialNum != null" >
        serialNum,
      </if>
      <if test="deliverSerial != null" >
        deliverSerial,
      </if>
      <if test="warehouseSerial != null" >
        warehouseSerial,
      </if>
      <if test="takeDeliverDate != null" >
        takeDeliverDate,
      </if>
      <if test="receiver != null" >
        receiver,
      </if>
      <if test="contactNum != null" >
        contactNum,
      </if>
      <if test="takeDeliverNum != null" >
        takeDeliverNum,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="actualDate != null" >
        actualDate,
      </if>
      <if test="taker != null" >
        taker,
      </if>
      <if test="takeRemark != null" >
        takeRemark,
      </if>
      <if test="takeDeliverAddress != null" >
        takeDeliverAddress,
      </if>
      <if test="delFlg != null" >
        delFlg,
      </if>
      <if test="creator != null" >
        creator,
      </if>
      <if test="createTime != null" >
        createTime,
      </if>
      <if test="updater != null" >
        updater,
      </if>
      <if test="updateTime != null" >
        updateTime,
      </if>
      <if test="reason != null" >
        reason,
      </if>
      <if test="processInstanceId != null" >
        processInstanceId,
      </if>
      <if test="userId != null" >
        userId,
      </if>
      <if test="applyDate != null" >
        applyDate,
      </if>
      <if test="status != null" >
        status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="serialNum != null" >
        #{serialNum,jdbcType=VARCHAR},
      </if>
      <if test="deliverSerial != null" >
        #{deliverSerial,jdbcType=VARCHAR},
      </if>
      <if test="warehouseSerial != null" >
        #{warehouseSerial,jdbcType=VARCHAR},
      </if>
      <if test="takeDeliverDate != null" >
        #{takeDeliverDate,jdbcType=DATE},
      </if>
      <if test="receiver != null" >
        #{receiver,jdbcType=VARCHAR},
      </if>
      <if test="contactNum != null" >
        #{contactNum,jdbcType=VARCHAR},
      </if>
      <if test="takeDeliverNum != null" >
        #{takeDeliverNum,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="actualDate != null" >
        #{actualDate,jdbcType=TIMESTAMP},
      </if>
      <if test="taker != null" >
        #{taker,jdbcType=VARCHAR},
      </if>
      <if test="takeRemark != null" >
        #{takeRemark,jdbcType=VARCHAR},
      </if>
      <if test="takeDeliverAddress != null" >
        #{takeDeliverAddress,jdbcType=VARCHAR},
      </if>
      <if test="delFlg != null" >
        #{delFlg,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updater != null" >
        #{updater,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="reason != null" >
        #{reason,jdbcType=VARCHAR},
      </if>
      <if test="processInstanceId != null" >
        #{processInstanceId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        #{userId,jdbcType=INTEGER},
      </if>
      <if test="applyDate != null" >
        #{applyDate,jdbcType=DATE},
      </if>
      <if test="status != null" >
        #{status,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.congmai.zhgj.web.model.TakeDeliveryExample" resultType="java.lang.Integer" >
    select count(*) from takeDelivery
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <select id="countListByExample" parameterType="com.congmai.zhgj.web.model.TakeDeliverySelectExample" resultType="java.lang.Integer" >
    select count(*) from takeDelivery td 
    left join delivery d on d.serialNum= td.deliverSerial
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
<update id="updateByExampleSelective" parameterType="map" >
    update takeDelivery
    <set >
      <if test="record.serialNum != null" >
        serialNum = #{record.serialNum,jdbcType=VARCHAR},
      </if>
      <if test="record.deliverSerial != null" >
        deliverSerial = #{record.deliverSerial,jdbcType=VARCHAR},
      </if>
      <if test="record.warehouseSerial != null" >
        warehouseSerial = #{record.warehouseSerial,jdbcType=VARCHAR},
      </if>
      <if test="record.takeDeliverDate != null" >
        takeDeliverDate = #{record.takeDeliverDate,jdbcType=DATE},
      </if>
      <if test="record.receiver != null" >
        receiver = #{record.receiver,jdbcType=VARCHAR},
      </if>
      <if test="record.contactNum != null" >
        contactNum = #{record.contactNum,jdbcType=VARCHAR},
      </if>
      <if test="record.takeDeliverNum != null" >
        takeDeliverNum = #{record.takeDeliverNum,jdbcType=VARCHAR},
      </if>
      <if test="record.remark != null" >
        remark = #{record.remark,jdbcType=VARCHAR},
      </if>
      <if test="record.actualDate != null" >
        actualDate = #{record.actualDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.taker != null" >
        taker = #{record.taker,jdbcType=VARCHAR},
      </if>
      <if test="record.takeRemark != null" >
        takeRemark = #{record.takeRemark,jdbcType=VARCHAR},
      </if>
      <if test="record.takeDeliverAddress != null" >
        takeDeliverAddress = #{record.takeDeliverAddress,jdbcType=VARCHAR},
      </if>
      <if test="record.delFlg != null" >
        delFlg = #{record.delFlg,jdbcType=VARCHAR},
      </if>
      <if test="record.creator != null" >
        creator = #{record.creator,jdbcType=VARCHAR},
      </if>
      <if test="record.createTime != null" >
        createTime = #{record.createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updater != null" >
        updater = #{record.updater,jdbcType=VARCHAR},
      </if>
      <if test="record.updateTime != null" >
        updateTime = #{record.updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.reason != null" >
        reason = #{record.reason,jdbcType=VARCHAR},
      </if>
      <if test="record.processInstanceId != null" >
        processInstanceId = #{record.processInstanceId,jdbcType=VARCHAR},
      </if>
      <if test="record.userId != null" >
        userId = #{record.userId,jdbcType=INTEGER},
      </if>
      <if test="record.applyDate != null" >
        applyDate = #{record.applyDate,jdbcType=DATE},
      </if>
      <if test="record.status != null" >
        status = #{record.status,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    update takeDelivery
    set serialNum = #{record.serialNum,jdbcType=VARCHAR},
      deliverSerial = #{record.deliverSerial,jdbcType=VARCHAR},
      warehouseSerial = #{record.warehouseSerial,jdbcType=VARCHAR},
      takeDeliverDate = #{record.takeDeliverDate,jdbcType=DATE},
      receiver = #{record.receiver,jdbcType=VARCHAR},
      contactNum = #{record.contactNum,jdbcType=VARCHAR},
      takeDeliverNum = #{record.takeDeliverNum,jdbcType=VARCHAR},
      remark = #{record.remark,jdbcType=VARCHAR},
      actualDate = #{record.actualDate,jdbcType=TIMESTAMP},
      taker = #{record.taker,jdbcType=VARCHAR},
      takeRemark = #{record.takeRemark,jdbcType=VARCHAR},
      takeDeliverAddress = #{record.takeDeliverAddress,jdbcType=VARCHAR},
      delFlg = #{record.delFlg,jdbcType=VARCHAR},
      creator = #{record.creator,jdbcType=VARCHAR},
      createTime = #{record.createTime,jdbcType=TIMESTAMP},
      updater = #{record.updater,jdbcType=VARCHAR},
      updateTime = #{record.updateTime,jdbcType=TIMESTAMP},
      reason = #{record.reason,jdbcType=VARCHAR},
      processInstanceId = #{record.processInstanceId,jdbcType=VARCHAR},
      userId = #{record.userId,jdbcType=INTEGER},
      applyDate = #{record.applyDate,jdbcType=DATE},
      status = #{record.status,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.congmai.zhgj.web.model.TakeDelivery" >
    update takeDelivery
    <set >
      <if test="deliverSerial != null" >
        deliverSerial = #{deliverSerial,jdbcType=VARCHAR},
      </if>
      <if test="warehouseSerial != null" >
        warehouseSerial = #{warehouseSerial,jdbcType=VARCHAR},
      </if>
      <if test="takeDeliverDate != null" >
        takeDeliverDate = #{takeDeliverDate,jdbcType=DATE},
      </if>
      <if test="receiver != null" >
        receiver = #{receiver,jdbcType=VARCHAR},
      </if>
      <if test="contactNum != null" >
        contactNum = #{contactNum,jdbcType=VARCHAR},
      </if>
      <if test="takeDeliverNum != null" >
        takeDeliverNum = #{takeDeliverNum,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="actualDate != null" >
        actualDate = #{actualDate,jdbcType=TIMESTAMP},
      </if>
      <if test="taker != null" >
        taker = #{taker,jdbcType=VARCHAR},
      </if>
      <if test="takeRemark != null" >
        takeRemark = #{takeRemark,jdbcType=VARCHAR},
      </if>
      <if test="takeDeliverAddress != null" >
        takeDeliverAddress = #{takeDeliverAddress,jdbcType=VARCHAR},
      </if>
      <if test="delFlg != null" >
        delFlg = #{delFlg,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        creator = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        createTime = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updater != null" >
        updater = #{updater,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        updateTime = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="reason != null" >
        reason = #{reason,jdbcType=VARCHAR},
      </if>
      <if test="processInstanceId != null" >
        processInstanceId = #{processInstanceId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        userId = #{userId,jdbcType=INTEGER},
      </if>
      <if test="applyDate != null" >
        applyDate = #{applyDate,jdbcType=DATE},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=VARCHAR},
      </if>
    </set>
    where serialNum = #{serialNum,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.congmai.zhgj.web.model.TakeDelivery" >
    update takeDelivery
    set deliverSerial = #{deliverSerial,jdbcType=VARCHAR},
      warehouseSerial = #{warehouseSerial,jdbcType=VARCHAR},
      takeDeliverDate = #{takeDeliverDate,jdbcType=DATE},
      receiver = #{receiver,jdbcType=VARCHAR},
      contactNum = #{contactNum,jdbcType=VARCHAR},
      takeDeliverNum = #{takeDeliverNum,jdbcType=VARCHAR},
      remark = #{remark,jdbcType=VARCHAR},
      actualDate = #{actualDate,jdbcType=TIMESTAMP},
      taker = #{taker,jdbcType=VARCHAR},
      takeRemark = #{takeRemark,jdbcType=VARCHAR},
      takeDeliverAddress = #{takeDeliverAddress,jdbcType=VARCHAR},
      delFlg = #{delFlg,jdbcType=VARCHAR},
      creator = #{creator,jdbcType=VARCHAR},
      createTime = #{createTime,jdbcType=TIMESTAMP},
      updater = #{updater,jdbcType=VARCHAR},
      updateTime = #{updateTime,jdbcType=TIMESTAMP},
      reason = #{reason,jdbcType=VARCHAR},
      processInstanceId = #{processInstanceId,jdbcType=VARCHAR},
      userId = #{userId,jdbcType=INTEGER},
      applyDate = #{applyDate,jdbcType=DATE},
      status = #{status,jdbcType=VARCHAR}
    where serialNum = #{serialNum,jdbcType=VARCHAR}
  </update>
      <select id="selectByTakeDeliveryPrimaryKeyForStockIn" resultMap="BaseResultMap2" parameterType="java.lang.String" >
    select
    d.serialNum, d.deliverNum,d.deliverType, d.orderSerial,d.docNum,d.supplyComId,d.buyComId,d.shipper,d.receiver,dm.serialNum as dmSerialNum,dm.batchNum,
    dm.manufactureDate,dm.deliverCount,dm.deliverRemark,
    dm2.acceptCount,dm2.refuseCount,dm2.takeRemark,dm.qualifiedCount,dm.unqualifiedCount,dm.checkRemark,dm.warehouseSerial as dmWarehouseSerial,
	dm.positionSerial as dmPositionSerial,dm.stockCount,dm.unstockCount,dm.stockRemark,dm.remark as dmRemark,dm.warehouseSerial as dmWarehouseSerial,dm.orderMaterielSerial,
	dm2.serialNum as stockInSerialNum,dm2.qualifiedCount as stockInQualifiedCount,dm2.unqualifiedCount as stockInUnqualifiedCount,dm2.checkRemark as stockInCheckRemark,dm2.warehouseSerial as stockInWarehouseSerial,
	dm2.positionSerial as stockInPositionSerial,dm2.stockCount as stockInCount,dm2.unstockCount as unstockInCount,dm2.stockRemark as stockInRemark,
	td.serialNum as tdSerialNum,td.contactNum as tdContactNum,td.takeDeliverNum
    from takeDelivery td
    left join delivery  d on d.serialNum = td.deliverSerial
    left join deliveryMateriel dm on d.serialNum = dm.deliverSerial and dm.delFlg = "0"
    left join deliveryMateriel dm2 on td.serialNum = dm2.deliverSerial and dm.orderMaterielSerial=dm2.orderMaterielSerial and dm.delFlg = "0"
    where td.serialNum = #{serialNum,jdbcType=VARCHAR} 
  </select>
  
  <select id="selectTakeDeliveryByDeliveryId" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from takeDelivery
    where deliverSerial = #{serialNum,jdbcType=VARCHAR} 
  </select>
  
    <select id="selectByPrimaryDeliveryKey" resultMap="BaseResultMap2" parameterType="java.lang.String" >
    select
    d.serialNum, d.deliverNum,d.deliverType,d.docNum, d.orderSerial, d.supplyComId, d.buyComId, d.shipper, d.receiver, d.makeDate, d.maker, 
    d.remark, d.approval, d.approvalDate, d.warehouseSerial as warehouseSerial, d.materielCount, d.deliverDate,d.deliverAddress, 
    d.packageCount, d.materielWeight, d.packageType, d.packageSpecifications, d.serviceMoney, d.deliverer, 
    d.contactNum, d.deliverRemark, d.delFlg, d.creator, d.createTime, d.updater, d.updateTime,dm.batchNum,    d.contactNum, d.deliverRemark, d.delFlg, d.creator, d.createTime, d.updater, d.updateTime,dm.batchNum,dm.serialNum as dmSerialNum,
    dm.manufactureDate,dm.deliverCount,dm.deliverRemark,
    dm2.acceptCount,dm2.refuseCount,dm2.takeRemark,dm.qualifiedCount,dm.unqualifiedCount,dm.checkRemark,dm.warehouseSerial,dm.orderMaterielSerial,
    dm2.serialNum as stockInSerialNum,dm2.qualifiedCount as stockInQualifiedCount,dm2.unqualifiedCount as stockInUnqualifiedCount,dm2.checkRemark as stockInCheckRemark,dm2.warehouseSerial as stockInWarehouseSerial,
	dm2.positionSerial as stockInPositionSerial,dm2.stockCount as stockInCount,dm2.unstockCount as unstockInCount,dm2.stockRemark as stockInRemark,
    dt.serialNum as dtSerialNum,dt.transportType,dt.transport,dt.port,dt.shipNumber,dt.playArrivalDate,dt.playWarehouseDate,dt.remark as delivery_transport_remark,dt.contactNum as dtContactNum,dt.contact as dtContact,
	td.serialNum as tdSerialNum,td.warehouseSerial as tdWarehouseSerial,td.takeDeliverDate,td.receiver as tdReceiver,td.contactNum as tdContactNum,td.takeDeliverNum,td.remark as take_delivery_remark, 
	td.actualDate, td.taker, td.takeRemark,td.reason,td.processInstanceId,td.userId,td.applyDate,td.status,td.takeDeliverAddress
    from takeDelivery td
    left join delivery  d on d.serialNum = td.deliverSerial
    left join deliveryTransport dt on d.serialNum = dt.deliverSerial  and dt.delFlg = "0"
    left join deliveryMateriel dm on d.serialNum = dm.deliverSerial and dm.delFlg = "0"
    left join deliveryMateriel dm2 on td.serialNum = dm2.deliverSerial and dm.orderMaterielSerial=dm2.orderMaterielSerial and dm.delFlg = "0"
    where d.serialNum = #{serialNum,jdbcType=VARCHAR} 
  </select>
   <!-- 将当前其他未确认发货的发货单更新为已失效 -->
    <update id="updateOtherTakeDeliveryStatus" parameterType="java.util.HashMap">
    UPDATE takeDelivery  td  
    left join  delivery d on   d.serialNum=td.deliverSerial
    SET td.status='000',td.updateTime=NOW()
     WHERE d.serialNum!=#{serialNum} and d .orderSerial=#{orderSerial} and (d.status='0' or  d.status='10') and  d.delFlg=0
   
    </update>
</mapper>